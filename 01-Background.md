# Google C++ 스타일 가이드

## 배경
C++는 Google의 많은 오픈 소스 프로젝트에서 사용하는 주요 개발 언어 중 하나입니다. C++는 강력하지만 복잡한 여러 기능들이 있습니다. 그렇기에 코드에 버그가 생기기 쉽고, 읽기 어려우며, 유지보수하기 힘든 언어입니다.

이 가이드의 목표는 C++ 코드를 작성할 때 해야 할 것과 하지 말아야 할 것을 상세히 설명함으로써 이러한 복잡성을 줄이는 것입니다. 이 가이드에서 제공하는 규칙들은 개발자들이 C++ 언어 기능을 효과적으로 활용하면서도 코드베이스를 관리하기 쉽게 유지하는 데 도움을 줍니다.

**가독성(Readability)** 이라고도 불리는 스타일은 C++ 코드가 따라야 할 **규칙**을 의미합니다. Google에서 개발한 대부분의 오픈 소스 프로젝트는 이 가이드의 요구사항을 준수합니다. 참고로 이 가이드는 C++ 튜토리얼이 아니며, 독자는 이 언어에 대해 익숙한 상태라 가정하고 작성되었습니다.

### 스타일 가이드의 목표

Google C++ 스타일 가이드는 달성하고자 하는 몇 가지 핵심 목표가 있으며 모든 개별 규칙의 근본적인 이유입니다. 이러한 목표들을 먼저 제시함으로써, 논의의 기반을 마련하고 규칙이 존재하는 이유와 특정 결정이 내려진 배경을 명확히 설명하고자 합니다.

각 규칙이 어떤 목표를 달성하는지 이해한다면, 언제 예외가 허용될 수 있는지, 그리고 가이드의 규칙을 변경하기 위해 어떤 종류의 논의나 대안이 필요한지가 모두에게 더 분명해질 것입니다. 현재 Google C++ 스타일 가이드의 목표는 다음과 같습니다.

**스타일 규칙은 충분한 가치가 있어야 합니다**

스타일 규칙의 이점은 모든 엔지니어가 기억해야 할 만큼 충분히 가치가 있어야 합니다. 이점은 규칙이 없을 때와 비교하여 측정되므로, 매우 해로운 관행에 대한 규칙이라도 사람들이 어차피 그것을 거의 하지 않는다면 실질적인 가치는 크지 않을 수 있습니다.

예를 들어, `goto`는 여러 원칙을 위반하지만, 이미 극히 드물게 사용되므로 가이드에서 특별히 다루지 않습니다.

**작성자보다 독자를 위해 최적화하세요**

Google의 코드베이스와 개별 컴포넌트들은 오랜 시간 동안 사용될 가능성이 높습니다. 코드를 작성하는 시간보다 읽는 데 훨씬 더 많은 시간이 소요되며, 따라서 코드 작성의 편의성보다는 코드베이스에서 코드를 읽고, 유지보수하고, 디버깅하는 일반적인 소프트웨어 엔지니어의 경험을 최적화하는 것을 목표로 합니다.

"독자를 위한 단서를 남겨라"는 이 원칙의 중요한 지침입니다. 코드에서 특이하거나 예상치 못한 동작이 발생할 때(예: 포인터 소유권 이전), 사용 지점에 텍스트 힌트를 남기는 것이 유용합니다(`std::unique_ptr`은 호출 시점에서 소유권 이전을 명확히 보여줍니다).

**기존 코드와의 일관성을 유지하세요**

코드베이스 전체에 걸쳐 일관된 스타일을 사용하면 코드 스타일보다 더 중요한 문제에 집중할 수 있습니다. 일관성 유지 원칙에 기반한 많은 규칙들은 "하나의 방식을 선택하고 그 방식을 고수하라"로 요약할 수 있습니다. 스타일의 일관성에 대해 유연성을 허용하면 불필요한 논쟁만 야기하고 실질적 이득은 적습니다. 일관성은 자동화 도구 사용도 용이하게 합니다. 예를 들어 코드 형식을 정리하거나 `#include` 문을 관리하는 도구는 코드가 일관된 패턴을 따를 때만 제대로 작동합니다.

하지만 일관성을 맹목적으로 따르는 것에도 한계가 있습니다. 일관성은 다른 뚜렷한 기술적 이유나 방향성이 없을 때 결정을 내리는 기준이 될 뿐입니다. 일관성 유지라는 명목으로 더 나은 새로운 스타일의 장점을 무시하거나, 코드베이스가 시간이 지남에 따라 발전하는 자연스러운 과정을 방해하면서 구식 스타일을 고집하는 것은 바람직하지 않습니다.

**적절한 경우 더 넓은 C++ 커뮤니티와의 일관성을 유지하세요**

다른 조직들이 C++를 사용하는 방식과의 일관성 유지는 google의 코드베이스 내의 일관성과 마찬가지로 중요합니다. C++ 표준의 기능이 문제를 해결하거나 어떤 관용구가 널리 알려져 있고 받아들여진다면, 그것을 사용할 충분한 이유가 됩니다. 하지만 표준 기능과 관용구에 결함이 있거나 우리 코드베이스의 필요를 고려하지 않고 설계된 경우도 있습니다. 그런 경우, 표준 기능을 제한하거나 금지하는 것이 적절할 수 있습니다. 어떤 경우에는 C++ 표준 라이브러리보다 자체 개발 라이브러리나 서드파티(thirdparty) 라이브러리를 선호하기도 하는데, 이는 더 나은 성능을 제공하거나 코드베이스를 표준 인터페이스로 전환하는 비용이 너무 크기 때문입니다.

**예상치 못하거나 위험한 코드 구조를 피하세요**

C++에는 겉보기보다 예상치 못한 동작을 하거나 위험한 기능들이 있습니다. 이러한 함정에 빠지는 것을 방지하기 위해 가이드에는 특정 기능들에 대한 제한이 있습니다. 이러한 제한 조건들에 대한 예외는 종종 프로그램의 정확성을 직접적으로 위협할 수 있기 때문에, 큰 이점이 없다면 제약 조건을 지키는 것이 권장됩니다.

**일반적인 C++ 프로그래머가 이해하기 어렵거나 유지보수하기 힘든 구조를 피하세요**

C++에는 코드에 도입하는 복잡성 때문에 일반적으로 적합하지 않은 기능들이 있습니다. 복잡한 구현의 구현의 이점이 사용량에 따라 크게 확대되고, 복잡성을 이해하는 비용은 코드베이스의 새로운 부분에서 작업할 때 다시 지불할 필요가 없을때는 이러한 규칙에 예외를 둘 수 있습니다.

확실하지 않다면 프로젝트 리더에게 문의하여 이러한 유형의 규칙에 대한 예외를 요청할 수 있습니다. 이는 시간이 지남에 따라 코드 소유권과 팀 구성이 변경되기 때문에 코드베이스에 특히 중요합니다. 현재 특정 코드를 다루는 모든 사람이 이해하더라도, 그 이해가 몇 년 후에도 유지된다는 보장은 없습니다.

**규모를 염두에 두세요**

1억 줄이 넘는 코드베이스와 수천 명의 엔지니어를 고려할 때, 한 엔지니어에게는 사소한 실수나 단순화가 많은 사람에게 큰 비용을 초래할 수 있습니다. 예를 들어, 전역 네임스페이스를 오염시키지 않는 것이 특히 중요합니다. 수억 줄의 코드베이스에서는 이름 충돌을 처리하기 어렵고, 모든 사람이 전역 네임스페이스에 항목을 추가한다면 이를 피하기 어렵습니다.

**필요할 때는 최적화를 우선시하세요**

성능 최적화는 때로 필요하고 적절할 수 있으며, 이는 이 문서의 다른 원칙들과 충돌하는 경우에도 마찬가지입니다.

이 문서는 합리적인 범위 내에서 최대한 명확한 지침을 제공하고자 하며 개인이나 팀의 취향이 아닌, Google C++ 커뮤니티 전체에서 인정된 관행을 구체적으로 제시하려고 합니다. 지나치게 복잡하거나 일반적이지 않은 코드 구조에 대해서는 의심하고 피하는 것이 좋습니다. 무언가가 명시적으로 금지되지 않았다고 해서 그것이 허용된다는 의미는 아닙니다. 판단이 서지 않을 때는 망설이지 말고 프로젝트 리더에게 추가 의견을 구하세요.